<%= render partial: "shared/header", locals: {title: "Maps" , back: root_path,single_page: ""} %>
<p id="notice"><%= notice %></p>
<div id="map" class="map m-2">
  <!-- OL map will be here  -->
</div>



<script type="text/javascript">

	// adding GPS DATA
	var geojsonObject =  {
	  'type': 'FeatureCollection',
	  'crs': {
	    'type': 'name',
	    'properties': {
	      'name': 'EPSG:3857'
	    }
	  },
	  'features': [{
	    'type': 'Feature',
	    'geometry': {
	      'type': 'Point',
	      'coordinates': ol.proj.fromLonLat([
        <%= Map.last.lon %>
        ,
        <%= Map.last.lat %>
        ])
	    }
	  }, {
	    'type': 'Feature',
	    'geometry': {
	      'type': 'LineString',
	      'coordinates': [
        <% @maps.each do |map| %>
	        ol.proj.fromLonLat([
	          <%= map.lon %>,
	          <%= map.lat %>
	        ]),
        <% end %>
	      ]
	    }
	  }]
	};
</script>
